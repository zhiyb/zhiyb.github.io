<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Why Shell Programming?</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"><LINK
REL="HOME"
TITLE="Advanced Bash-Scripting Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="Introduction"
HREF="part1.html"><LINK
REL="PREVIOUS"
TITLE="Introduction"
HREF="part1.html"><LINK
REL="NEXT"
TITLE="Starting Off With a Sha-Bang"
HREF="sha-bang.html"><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"><LINK
REL="stylesheet"
HREF="common/kde-common.css"
TYPE="text/css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=gb2312"><META
HTTP-EQUIV="Content-Language"
CONTENT="en"><LINK
REL="stylesheet"
HREF="common/kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"><LINK
REL="stylesheet"
HREF="common/kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#AA0000"
VLINK="#AA0055"
ALINK="#AA0000"
STYLE="font-size:18px;
font-family:宋体, Arial;
line-height:140%;"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Advanced Bash-Scripting Guide: An in-depth exploration of the art of shell scripting</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="part1.html"
>前进</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sha-bang.html"
>后退</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="WHY-SHELL"
>第一章：为什么要有Shell编程?</A
></H1
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="EPIGRAPH"
><TR
><TD
WIDTH="45%"
>&nbsp;</TD
><TD
WIDTH="45%"
ALIGN="LEFT"
VALIGN="TOP"
><I
><P
><I
>没有一种编程语言是完美的。甚至也没有一种最好的语言；只有一种非常合适或可能非常不合适实际目标的语言。</I
></P
></I
></TD
></TR
><TR
><TD
WIDTH="45%"
>&nbsp;</TD
><TD
WIDTH="45%"
ALIGN="RIGHT"
VALIGN="TOP"
><I
><SPAN
CLASS="ATTRIBUTION"
>Herbert Mayer</SPAN
></I
></TD
></TR
></TABLE
><P
>脚本应用知识对于希望相当精通系统管理的任何人来说是必需的，即使他实际上并不想写一个脚本程序。一般来说一个Linux机器启动后，它会执行在<TT
CLASS="FILENAME"
>/etc/rc.d</TT
>
      目录下的Shell脚本重建系统环境并且启动各种服务。理解这些启动脚本的细节对分析系统运作行为并修改它是意义重大的。</P
><P>
编写shell脚本不是很难学，因为脚本内建的功能集（check?）和他们只有相当少的shell的操作符和选项
     
      <A
NAME="AEN58"
HREF="#FTN.AEN58"
>[1]</A
>

      需要学。语法非常的简单易懂，就像在命令行上调用和连接软件包一样容易，它仅有一些少量的 <SPAN
CLASS="QUOTE"
>"规则"</SPAN
> 需要掌握。大多数短小的脚本第一次就工作的很好，即使是较长的脚本调试也相当的容易。</P
><P
>shell脚本是一个复杂应用原型的<SPAN
CLASS="QUOTE"
>"quick and dirty"</SPAN
> 方法。在项目开发中用shell编程实现一个有限的功能性子集常常是有用的开始。用这种方法去测试应用程序的结构和模块组合，可以在实际地用C,C++,Java或者Perl进行编程之前发现主要的设计缺陷。</P
><P
>Shell编程遵从经典UNIX哲学：把复杂的问题分解成简单的小问题，然后再把各部分功能组合起来解决复杂问题。这和用新一代高级的多用途的语言，例如Perl，试图成为所有人处理所有事情的语言但是所付出的代价是强迫改变你的思维方法来适应这种工具，大多数人认为这是一个更好的或者至少感觉上更令人能接受的方法。</P
><P
>什么时候不适合使用Shell编程：

      <UL
><LI
><P
>资源紧张的项目，特别是那些速度是重要因素的地方（排序，散序，等等）</P
></LI
><LI
><P
>程序要进行很复杂的数学计算，特别是浮点计算，任意精度的计算，或者是复数计算（应该用C＋＋或是FORTRAN代替）</P
></LI
><LI
><P
>要求交叉编译平台的可移植性（使用C或者是Java代替）</P
></LI
><LI
><P
>需要结构化编程的复杂应用（需要变量类型检查和函数原型等等）</P
></LI
><LI
><P
>对于影响系统全局性的关键任务应用。</P
></LI
><LI
><P
>安全非常重要。你必须保证系统完整性和抵抗入侵，攻击和恶意破坏。</P
></LI
><LI
><P
>项目由连串的依赖的各个部分组成。</P
></LI
><LI
><P
>多种文件操作要求（Bash被限制成文件顺序存取，并且是以相当笨拙，效率低下的逐行的存取方式）</P
></LI
><LI
><P
>需要良好的多维数组支持。</P
></LI
><LI
><P
>需要类似链表或树这样的数据结构。</P
></LI
><LI
><P
>需要产生或操作图象或图形用户界面。</P
></LI
><LI
><P
>需要直接存取系统硬件。</P
></LI
><LI
><P
>需要端口号或是socket I/O。</P
></LI
><LI
><P
>需要使用可重用的函数库或接口。</P
></LI
><LI
><P
>所有的私有的不开源的应用程序（Shell脚本的源代码是直接可读，能被所有人看到的）</P
></LI
></UL
></P
><P
>如果你需要有上面的任意一种应用，请考虑其他的更强大的脚本语言DDPerl,Tcl,Python,Ruby，或者可能是其他更高级的编译型语言，例如C，C＋＋或者是Java。尽管如此，使用Shell脚本来构造应用原型仍然是一个有用的开发步骤。</P
><P
>我们将会使用<SPAN
CLASS="ACRONYM"
>Bash</SPAN
>,它是
      <SPAN
CLASS="QUOTE"
>"Bourne-Again shell"</SPAN
> 的首字母缩写，并且是Setphen Bourne写的经典的Bourne shell的同义词。Bash已经变成了所有令人喜欢的UNIX上shell编程 <I
CLASS="FOREIGNPHRASE"
>事实的上的</I
> 这本书的大多数脚本技术能很好的应用到其他的Shell当中，比如说Korn Shell，Bash借用了它的一些特性，

       <A
NAME="AEN102"
HREF="#FTN.AEN102"
>[2]</A
>

      还有C Shell和他的不同之处。（注意：C shell编程不是交付一定的内在问题，这点已由Tom Christiansen在1993年10月在 <A
HREF="http://www.etext.org/Quartz/computer/unix/csh.harmful.gz"
TARGET="_top"
>Usenet
      post</A
> 被指出了）
      </P
><P
>接下来是的是一篇脚本的指南。它由许多的例子来引出Shell的许多特性。这些已经被测试过的例子不仅能工作，并且可能的话某些甚至能用在真正的应用中。读者能让源码文件(<TT
CLASS="FILENAME"
>scriptname.sh</TT
>或是
      <TT
CLASS="FILENAME"
>scriptname.bash</TT
>)的这些例子真正地运行起来,

         <A
NAME="AEN110"
HREF="#FTN.AEN110"
>[3]</A
>

      给他们增加运行权限(<TT
CLASS="USERINPUT"
><B
>chmod
      u+rx scriptname</B
></TT
>), 然后运行他们看看运行结果。如果你没有源码包，你仍然可以从<A
HREF="http://www.tldp.org/LDP/abs/abs-guide.html.tar.gz"
TARGET="_top"
>HTML</A
>,
      <A
HREF="http://www.tldp.org/LDP/abs/abs-guide.pdf"
TARGET="_top"
>pdf</A
>,
     或是<A
HREF="http://www.ibiblio.org/pub/Linux/docs/linux-doc-project/abs-guide/abs-guide.txt.gz"
TARGET="_top"
>text</A
>
      格式版本中复制粘贴代码。注意这些脚本可能在他们被详细解释前提前展示一些特性，这时读者可以暂时忽略这些特性。</P
><P
>如果不是特别注明,后面这些脚本例子是写这本书的 <A
HREF="mailto:thegrendel@theriver.com"
TARGET="_top"
>作者</A
> 所写的。</P
></DIV
><H3
CLASS="FOOTNOTES"
>注</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN58"
HREF="why-shell.html#AEN58"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>术语<A
HREF="internal.html#BUILTINREF"
>内建</A
>，是指它是Shell内部的特性。</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN102"
HREF="why-shell.html#AEN102"
>[2]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>许多<I
CLASS="EMPHASIS"
>ksh88</I
>的属性,
	 及一小部分的<I
CLASS="EMPHASIS"
>ksh93</I
>
	中加入的属性已经被增加到了Bash中.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN110"
HREF="why-shell.html#AEN110"
>[3]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>依照惯例，用户写的Bourne shell脚本应以
	 <TT
CLASS="FILENAME"
>.sh</TT
>作为扩展名。而系统脚本，比如说放在目录<TT
CLASS="FILENAME"
>/etc/rc.d</TT
>中的脚本则不用这种命名法。</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="part1.html"
>前进</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>目录</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sha-bang.html"
>后退</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>简介</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="part1.html"
>上一页</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>从一个Sha-Bang（#!）开始</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>