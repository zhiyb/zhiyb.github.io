<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Other Comparison Operators</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"><LINK
REL="HOME"
TITLE="Advanced Bash-Scripting Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="Tests"
HREF="tests.html"><LINK
REL="PREVIOUS"
TITLE="File test operators"
HREF="fto.html"><LINK
REL="NEXT"
TITLE="Nested if/then Condition Tests"
HREF="nestedifthen.html"><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"><LINK
REL="stylesheet"
HREF="common/kde-common.css"
TYPE="text/css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=gb2312"><META
HTTP-EQUIV="Content-Language"
CONTENT="en"><LINK
REL="stylesheet"
HREF="common/kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"><LINK
REL="stylesheet"
HREF="common/kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#AA0000"
VLINK="#AA0055"
ALINK="#AA0000"
STYLE="font-size:18px;
font-family:"黑体", Arial;
font-weight:bolder;
line-height:200%;"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Advanced Bash-Scripting Guide: An in-depth exploration of the art of shell scripting</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="fto.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 7. Tests</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="nestedifthen.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
>
  <H1
CLASS="SECT1"
><A
NAME="COMPARISON-OPS"
>7.3. 其它比较操作符</A
></H1
>
  <P
><i
class="EMPHASIS"
>二元<i
class="EMPHASIS"
></i
></i
>比较操作符比较两个变量或是数值。注意整数和字符串比较的分别。</P
>
  <DIV
CLASS="VARIABLELIST"
>
    <P
><B
><A
NAME="ICOMPARISON1"
></A
>整数比较</B
></P
>
    <DL
>
      <DT
><SPAN
CLASS="TOKEN"
>-eq</SPAN
></DT
>
      <DD
> 
        <P
><A
NAME="EQUALREF"
></A
></P
>
        <P
>等于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" -eq "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-ne</SPAN
></DT
>
      <DD
> 
        <P
>不等于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" -ne "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-gt</SPAN
></DT
>
      <DD
> 
        <P
>大于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" -gt "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-ge</SPAN
></DT
>
      <DD
> 
        <P
>大于等于<b></b></P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" -ge "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-lt</SPAN
></DT
>
      <DD
> 
        <P
>小于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" -lt "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-le</SPAN
></DT
>
      <DD
> 
        <P
>小于等于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" -le "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><A
NAME="INTLT"
></A
><SPAN
CLASS="TOKEN"
>&#60;</SPAN
></DT
>
      <DD
> 
        <P
>小于(在<a
href="dblparens.html"
>双括号</a
>里使用)</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>(("$a" &#60; "$b"))</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>&#60;=</SPAN
></DT
>
      <DD
> 
        <P
>小于等于 (在双括号里使用)</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>(("$a" &#60;= "$b"))</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>&#62;</SPAN
></DT
>
      <DD
> 
        <P
>大于 (在双括号里使用)</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>(("$a" &#62; "$b"))</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>&#62;=</SPAN
></DT
>
      <DD
> 
        <P
>大于等于(在双括号里使用)</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>(("$a" &#62;= "$b"))</B
></TT
></P
>
      </DD
>
    </DL
>
  </DIV
><DIV
CLASS="VARIABLELIST"
>
    <P
><B
><A
NAME="SCOMPARISON1"
></A
>字符串比较</B
></P
>
    <DL
>
      <DT
><SPAN
CLASS="TOKEN"
>=</SPAN
></DT
>
      <DD
> 
        <P
><A
NAME="EQUALSIGNREF"
></A
></P
>
        <P
>等于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" = "$b" ]</B
></TT
></P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>==</SPAN
></DT
>
      <DD
> 
        <P
>等于</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" == "$b" ]</B
></TT
></P
>
        <P
>它和=是同义词。</P
>
        <DIV
CLASS="NOTE"
> 
          <TABLE
CLASS="NOTE"
WIDTH="90%"
BORDER="0"
>
            <TR
> 
              <TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/note.png"
HSPACE="5"
ALT="Note"></TD
>
              <TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> ==比较操作符在一个<a
href="tests.html#DBLBRACKETS"
>双方括号</a
>测试和一个单方括号号里意思不同。
                <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
>
                  <TR
> 
                    <TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;[[ $a == z* ]]    # 如果变量$a以字符&quot;z&quot;开始(模式匹配)则为真.
   2&nbsp;[[ $a == "z*" ]]  # 如果变量$a与z*(字面上的匹配)相等则为真.
   3&nbsp;
   4&nbsp;[ $a == z* ]      # 文件扩展和单元分割有效.
   5&nbsp;[ "$a" == "z*" ]  # 如果变量$a与z*(字面上的匹配)相等则为真.
   6&nbsp;
   7&nbsp;# 多谢Stéphane Chazelas</PRE
></TD
>
                  </TR
>
                </TABLE
></P
>
                </TD
>
            </TR
>
          </TABLE
>
        </DIV
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>!=</SPAN
></DT
>
      <DD
> 
        <P
>不相等<b></b></P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" != "$b" ]</B
></TT
></P
>
        <P
>操作符在<a
href="tests.html#DBLBRACKETS"
>[[ ... ]]</a
>结构里使用模式匹配.</P
>
      </DD
>
      <DT
><A
NAME="LTREF"
></A
><SPAN
CLASS="TOKEN"
>&#60;</SPAN
></DT
>
      <DD
> 
        <P
>小于，依照ASCII字符排列顺序</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [[ "$a" &#60; "$b" ]]</B
></TT
></P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" \&#60; "$b" ]</B
></TT
></P
>
        <P
>注意<SPAN
CLASS="QUOTE"
>"&#60;"字符在</SPAN
><TT
CLASS="USERINPUT"
><B
>[ ]</B
></TT
> 结构里需要转义</P
>
      </DD
>
      <DT
><A
NAME="GTREF"
></A
><SPAN
CLASS="TOKEN"
>&#62;</SPAN
></DT
>
      <DD
> 
        <P
>大于，依照ASCII字符排列顺序</P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [[ "$a" &#62; "$b" ]]</B
></TT
></P
>
        <P
><TT
CLASS="USERINPUT"
><B
>if [ "$a" \&#62; "$b" ]</B
></TT
></P
>
        <P
>注意<SPAN
CLASS="QUOTE"
>"&gt;"字符在</SPAN
><TT
CLASS="USERINPUT"
><B
>[ ]</B
></TT
> 结构里需要转义.</P
>
        <P
>参考<A
HREF="arrays.html#BUBBLE"
>例子 26-11</A
> 中这种比较的一个应用.</P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-z</SPAN
></DT
>
      <DD
> 
        <P
>字符串为&quot;null&quot;，即是指字符串长度为零。</P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-n</SPAN
></DT
>
      <DD
> 
        <P
>字符串不为&quot;null&quot;，即长度不为零.</P
>
        <DIV
CLASS="CAUTION"
> 
          <TABLE
CLASS="CAUTION"
WIDTH="90%"
BORDER="0"
>
            <TR
> 
              <TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/caution.png"
HSPACE="5"
ALT="Caution"></TD
>
              <TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>在测试方括号里进行<tt
class="USERINPUT"
><b
>-n</b
></tt
>测试时一定要把字符串用引号起来。用没有引号引起的<tt
class="USERINPUT"
><b
>! -z</b
></tt
>或者在方括号里只有未引号引起的字符串 (参考<a
href="comparison-ops.html#STRTEST"
>例子 7-6</a
>)来进行测试一般都能工作，然而，这其实是不安全的测试。应该总是用引号把测试字符串引起来。<A
NAME="AEN2882"
HREF="#FTN.AEN2882"
>[1]</A
> </P
></TD
>
            </TR
>
          </TABLE
>
        </DIV
>
      </DD
>
    </DL
>
  </DIV
><DIV
CLASS="EXAMPLE"
><HR>
    <A
NAME="EX13"
></A
> 
    <P
><B
>例子 7-5. 算术和字符串比较</B
></P
>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;#!/bin/bash
   2&nbsp;
   3&nbsp;a=4
   4&nbsp;b=5
   5&nbsp;
   6&nbsp;#  这儿的&quot;a&quot;和&quot;b&quot;既能被看成是整数也能被看着是字符串。
   7&nbsp;#  在字符串和数字之间不是严格界定的，
   8&nbsp;#+ 因为Bash变量不是强类型的。
   9&nbsp;
  10&nbsp;#  Bash允许变量的整数操作和比较，
  11&nbsp;#+ 但这些变量必须只包括数字字符.
  12&nbsp;#  不管怎么样，你应该小心考虑.
  13&nbsp;
  14&nbsp;echo
  15&nbsp;
  16&nbsp;if [ "$a" -ne "$b" ]
  17&nbsp;then
  18&nbsp;  echo "$a is not equal to $b"
  19&nbsp;  echo "(arithmetic comparison)"
  20&nbsp;fi
  21&nbsp;
  22&nbsp;echo
  23&nbsp;
  24&nbsp;if [ "$a" != "$b" ]
  25&nbsp;then
  26&nbsp;  echo "$a is not equal to $b."
  27&nbsp;  echo "(string comparison)"
  28&nbsp;  #     "4"  != "5"
  29&nbsp;  # ASCII 52 != ASCII 53
  30&nbsp;fi
  31&nbsp;
  32&nbsp;# 在这个实际的例子中,&quot;-ne&quot;和&quot;!=&quot;都能工作.
  33&nbsp;
  34&nbsp;echo
  35&nbsp;
  36&nbsp;exit 0</PRE
></TD
></TR
></TABLE
><HR></DIV
><DIV
CLASS="EXAMPLE"
><HR>
    <A
NAME="STRTEST"
></A
> 
    <P
><B
>例子 7-6. 测试一个字符串是否是null值</B
></P
>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;#!/bin/bash
   2&nbsp;#  str-test.sh: 测试null字符串和没有用引号引起的字符串,
   3&nbsp;#+ but not strings and sealing wax, not to mention cabbages and kings . . .
   4&nbsp;
   5&nbsp;# 用if [ ... ]结构
   6&nbsp;
   7&nbsp;
   8&nbsp;# 如果一个字符串变量没有被初始化，它里面的值未定义。
   9&nbsp;# 这种情况称为&quot;null&quot;值(不同于零).
  10&nbsp;
  11&nbsp;if [ -n $string1 ]    # $string1没有被声明或初始化.
  12&nbsp;then
  13&nbsp;  echo "String \"string1\" is not null."
  14&nbsp;else  
  15&nbsp;  echo "String \"string1\" is null."
  16&nbsp;fi  
  17&nbsp;# 错误结果.
  18&nbsp;# Shows $string1 as not null, although it was not initialized.
  19&nbsp;
  20&nbsp;
  21&nbsp;echo
  22&nbsp;
  23&nbsp;
  24&nbsp;# 让我们再试试.
  25&nbsp;
  26&nbsp;if [ -n "$string1" ]  # 这次, $string1变量被引号引起.
  27&nbsp;then
  28&nbsp;  echo "String \"string1\" is not null."
  29&nbsp;else  
  30&nbsp;  echo "String \"string1\" is null."
  31&nbsp;fi                    # 在一个测试方括里用引号引起变量!
  32&nbsp;
  33&nbsp;
  34&nbsp;echo
  35&nbsp;
  36&nbsp;
  37&nbsp;if [ $string1 ]       # 这次,变量$string1什么也不加.
  38&nbsp;then
  39&nbsp;  echo "String \"string1\" is not null."
  40&nbsp;else  
  41&nbsp;  echo "String \"string1\" is null."
  42&nbsp;fi  
  43&nbsp;# This works fine.
  44&nbsp;# The [ ] test operator alone detects whether the string is null.
  45&nbsp;# However it is good practice to quote it ("$string1").
  46&nbsp;#
  47&nbsp;# As Stephane Chazelas points out,
  48&nbsp;#    if [ $string1 ]    has one argument, "]"
  49&nbsp;#    if [ "$string1" ]  has two arguments, the empty "$string1" and "]" 
  50&nbsp;
  51&nbsp;
  52&nbsp;
  53&nbsp;echo
  54&nbsp;
  55&nbsp;
  56&nbsp;
  57&nbsp;string1=initialized
  58&nbsp;
  59&nbsp;if [ $string1 ]       # Again, $string1 stands naked.
  60&nbsp;then
  61&nbsp;  echo "String \"string1\" is not null."
  62&nbsp;else  
  63&nbsp;  echo "String \"string1\" is null."
  64&nbsp;fi  
  65&nbsp;# Again, gives correct result.
  66&nbsp;# Still, it is better to quote it ("$string1"), because . . .
  67&nbsp;
  68&nbsp;
  69&nbsp;string1="a = b"
  70&nbsp;
  71&nbsp;if [ $string1 ]       # Again, $string1 stands naked.
  72&nbsp;then
  73&nbsp;  echo "String \"string1\" is not null."
  74&nbsp;else  
  75&nbsp;  echo "String \"string1\" is null."
  76&nbsp;fi  
  77&nbsp;# Not quoting "$string1" now gives wrong result!
  78&nbsp;
  79&nbsp;exit 0
  80&nbsp;# Thank you, also, Florian Wisser, for the "heads-up".</PRE
></TD
></TR
></TABLE
><HR></DIV
><DIV
CLASS="EXAMPLE"
><HR><A
NAME="EX14"
></A
>
    <P
><B
>例子 7-7. <B
CLASS="COMMAND"
>zmore</B
></B
></P
>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;#!/bin/bash
   2&nbsp;# zmore
   3&nbsp;
   4&nbsp;#用'more'查看被压缩过的文件
   5&nbsp;
   6&nbsp;NOARGS=65
   7&nbsp;NOTFOUND=66
   8&nbsp;NOTGZIP=67
   9&nbsp;
  10&nbsp;if [ $# -eq 0 ] # 等同于:  if [ -z &quot;$1&quot; ]
  11&nbsp;# $1可以存在,但为空:  zmore &quot;&quot; arg2 arg3
  12&nbsp;then
  13&nbsp;  echo "Usage: `basename $0` filename" &#62;&#38;2
  14&nbsp;  # 错误信息打印到标准错误.
  15&nbsp;  exit $NOARGS
  16&nbsp;  # 返回65作为脚本的退出状态(错误码).
  17&nbsp;fi  
  18&nbsp;
  19&nbsp;filename=$1
  20&nbsp;
  21&nbsp;if [ ! -f "$filename" ]   # Quoting $filename allows for possible spaces.
  22&nbsp;then
  23&nbsp;  echo "File $filename not found!" &#62;&#38;2
  24&nbsp;  # 错误信息打印到标准错误.
  25&nbsp;  exit $NOTFOUND
  26&nbsp;fi  
  27&nbsp;
  28&nbsp;if [ ${filename##*.} != "gz" ]
  29&nbsp;# 在方括号里使用变量替换.
  30&nbsp;then
  31&nbsp;  echo "File $1 is not a gzipped file!"
  32&nbsp;  exit $NOTGZIP
  33&nbsp;fi  
  34&nbsp;
  35&nbsp;zcat $1 | more
  36&nbsp;
  37&nbsp;# 用过滤程序'more.'
  38&nbsp;# 如果你想，也可以用'less'代替。
  39&nbsp;
  40&nbsp;
  41&nbsp;exit $?   # 脚本返回管道的退出状态
  42&nbsp;# 实际上&quot;exit $?&quot;是多余的,因为在任何情况下，
  43&nbsp;# 脚本会返回最后一个执行命令的退出码。</PRE
></TD
></TR
></TABLE
><HR></DIV
><DIV
CLASS="VARIABLELIST"
>
    <P
><B
><A
NAME="CCOMPARISON1"
></A
>混合比较</B
></P
>
    <DL
>
      <DT
><SPAN
CLASS="TOKEN"
>-a</SPAN
></DT
>
      <DD
> 
        <P
>逻辑与</P
>
        <P
><TT
CLASS="REPLACEABLE"
><I
> </I
></TT
> 如果exp1和exp2都为真，则<tt
class="REPLACEABLE"
><i
>exp1</i
></tt
><tt
class="REPLACEABLE"
><i
> -a exp2</i
></tt
>返回真.</P
>
      </DD
>
      <DT
><SPAN
CLASS="TOKEN"
>-o</SPAN
></DT
>
      <DD
> 
        <P
>逻辑或</P
>
        <P
>只要exp1和exp2任何一个为真，则<tt
class="REPLACEABLE"
><i
>exp1 -o exp2</i
></tt
> 返回真.</P
>
      </DD
>
    </DL
>
  </DIV
>
  <P
>它们和Bash中用于<a
href="tests.html#DBLBRACKETS"
>双方括号结构</a
>的比较操作符&amp;&amp;和||很相似。
  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;[[ condition1 &#38;&#38; condition2 ]]</PRE
></TD
></TR
></TABLE
>
	 -o和-a操作符和test命令或单方括号一起使用。
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;if [ "$exp1" -a "$exp2" ]</PRE
></TD
></TR
></TABLE
>
	   </P
>
  <P
>可以参考<a
href="operations.html#ANDOR"
>Example 8-3</a
>, <a
href="arrays.html#TWODIM"
>Example 26-16</a
>, 和<a
href="contributed-scripts.html#WHX"
>Example A-28</a
>怎么实际地使用混合比较操作符。</P
>
</DIV
>
<H3
CLASS="FOOTNOTES"
>注</H3
>
<TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN2882"
HREF="comparison-ops.html#AEN2882"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>就像S.C.指出的那样，在一个混合测试中，把一个字符串变量引号引起来可能还不够。如果$string变量是空的话，表达式<tt
class="USERINPUT"
><b
>[ -n "$string" -o "$a" = "$b" ]</b
></tt
>在一些Bash版本中可能会引起错误。安全的办法是附加一个外部的字符串给可能有空字符串变量比较的所有变量，<tt
class="USERINPUT"
><b
>[ "x$string" != x -o "x$a" = "x$b" ]</b
></tt
>(x字符可以互相抵消)。</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="fto.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="nestedifthen.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>File test operators</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="tests.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Nested if/then Condition Tests</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>