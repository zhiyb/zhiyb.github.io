<html xmlns:cf="http://docbook.sourceforge.net/xmlns/chunkfast/1.0">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>13.6. 快速参考</title>
<link rel="stylesheet" href="docbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.0">
<link rel="start" href="index.html" title="Linux 设备驱动 Edition 3">
<link rel="up" href="ch13.html" title="第&#160;13&#160;章&#160;USB 驱动">
<link rel="prev" href="ch13s05.html" title="13.5.&#160;无 urb 的 USB 传送">
<link rel="next" href="ch14.html" title="第&#160;14&#160;章&#160;Linux 设备模型">
</head>
<body bgcolor="white" text="black" link="#0000ff" vlink="#840084" alink="#0000ff">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="middle">
      <H2>13.6.&nbsp;快速参考</H2></th></tr>
<tr>
<td width="20%" align="left">
<A accessKey=p href="ch13s05.html">上一页</a>&nbsp;</td>
<th width="60%" align="middle"> </th>
<td width="20%" align="right">&nbsp;<A accessKey=n href="ch14.html">下一页</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="zh-cn">
<p>本节总结本章介绍的符号:</p>
<div class="variablelist"><dl>
<dt><span class="term"><span>#include &lt;linux/usb.h&gt;</span></span>
<dd><p>所有和 USB 相关的头文件. 它必须被所有的 USB 设备驱动包含.</p>
<dt><span class="term"><span>struct usb_driver;</span></span>
<dd><p>描述 USB 驱动的结构.</p>
<dt><span class="term"><span>struct usb_device_id;</span></span>
<dd><p>描述这个驱动支持的 USB 设备的结构.</p>
<dt><span class="term"><span>int usb_register(struct usb_driver *d);</span></span>
<dd><p>用来从USB核心注册和注销一个 USB 驱动的函数.</p>
<dt><span class="term"><span>struct usb_device *interface_to_usbdev(struct usb_interface *intf);</span></span>
<dd><p>从 struct usb_interface 获取控制 struct usb_device *.</p>
<dt><span class="term"><span>struct usb_device;</span></span>
<dd><p>控制完整 USB 设备的结构.</p>
<dt><span class="term"><span>struct usb_interface;</span></span>
<dd><p>主 USB 设备结构, 所有的 USB 驱动用来和 USB 核心通讯的.</p>
<dt><span class="term"><span>void usb_set_intfdata(struct usb_interface *intf, void *data);</span></span>
<dd>
<dt><span class="term"><span>void *usb_get_intfdata(struct usb_interface *intf);</span></span>
<dd><p>设置和获取在 struct usb_interface 中的私有数据指针部分的函数.</p>
<dt><span class="term"><span>struct usb_class_driver;</span></span>
<dd><p>描述 USB 驱动的一个结构, 这个驱动要使用 USB 主编号来和用户空间程序通讯.</p>
<dt><span class="term"><span>int usb_register_dev(struct usb_interface *intf, struct usb_class_driver *class_driver);</span></span>
<dd>
<dt><span class="term"><span>void usb_deregister_dev(struct usb_interface *intf, struct usb_class_driver
 *class_driver);</span></span>
<dd><p>用来注册和注销一个特定 struct usb_interface * 结构到 struct usb_class_driver 结构的函数.</p>
<dt><span class="term"><span>struct urb;</span></span>
<dd><p>描述一个 USB 数据传输的结构.</p>
<dt><span class="term"><span>struct urb *usb_alloc_urb(int iso_packets, int mem_flags);</span></span>
<dd>
<dt><span class="term"><span>void usb_free_urb(struct urb *urb);</span></span>
<dd><p>用来创建和销毁一个 struct usb urb*的函数.</p>
<dt><span class="term"><span>int usb_submit_urb(struct urb *urb, int mem_flags);</span></span>
<dd>
<dt><span class="term"><span>int usb_kill_urb(struct urb *urb);</span></span>
<dd>
<dt><span class="term"><span>int usb_unlink_urb(struct urb *urb);</span></span>
<dd><p>用来启动和停止一个 USB 数据传输的函数.</p>
<dt><span class="term"><span>void usb_fill_int_urb(struct urb *urb, struct usb_device *dev, unsigned int pipe, void *transfer_buffer, int buffer_length, usb_complete_t complete, void *context, int interval);</span></span>
<dd>
<dt><span class="term"><span>void usb_fill_bulk_urb(struct urb *urb, struct usb_device *dev, unsigned int pipe, void *transfer_buffer, int buffer_length, usb_complete_t complete, void *context);</span></span>
<dd>
<dt><span class="term"><span>void usb_fill_control_urb(struct urb *urb, struct usb_device *dev, unsigned int pipe, unsigned char *setup_packet, void *transfer_buffer, int buffer_ length, usb_complete_t complete, void *context);</span></span>
<dd><p>用来在被提交给 USB 核心之前初始化一个 struct urb 的函数. </p>
<dt><span class="term"><span>int usb_bulk_msg(struct usb_device *usb_dev, unsigned int pipe, void *data, int len, int *actual_length, int timeout);</span></span>
<dd>
<dt><span class="term"><span>int usb_control_msg(struct usb_device *dev, unsigned int pipe, __u8 request, __u8 requesttype, __u16 value, __u16 index, void *data, __u16 size, int timeout);</span></span>
<dd><p>用来发送和接受 USB 数据的函数, 不必使用一个 struct urb. </p></dd>
</dl></div>
</div>
<div class="navfooter">
<hr>

<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<A accessKey=p href="ch13s05.html">上一页</a>&nbsp;</td>
<td width="20%" align="middle"><A accessKey=u href="ch13.html">上一级</a></td>
<td width="40%" align="right">&nbsp;<A accessKey=n href="ch14.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">13.5.&nbsp;无 urb 的 USB 传送&nbsp;</td>
<td width="20%" align="middle"><A accessKey=h href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top">&nbsp;第&nbsp;14&nbsp;章&nbsp;Linux 设备模型</td>
</tr>
</table>
</div>
</body>
</html>
